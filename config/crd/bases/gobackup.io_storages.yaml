---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.19.0
  name: storages.gobackup.io
spec:
  group: gobackup.io
  names:
    kind: Storage
    listKind: StorageList
    plural: storages
    shortNames:
    - storage
    singular: storage
  scope: Namespaced
  versions:
  - name: v1
    schema:
      openAPIV3Schema:
        description: Storage is the Schema for the storages API
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: StorageSpec defines the desired state of Storage
            properties:
              config:
                description: Config contains the storage configuration
                properties:
                  access_key_id:
                    description: |-
                      AccessKeyID is the access key ID. Use access_key_id_ref to reference a Secret instead
                      Used by: s3, oss, r2, spaces, b2, cos, us3, kodo, bos, minio, obs, tos, upyun
                    type: string
                  access_key_id_ref:
                    description: |-
                      AccessKeyIDRef references a Secret containing the access key ID
                      Used by: s3, oss, r2, spaces, b2, cos, us3, kodo, bos, minio, obs, tos, upyun
                    properties:
                      key:
                        description: The key of the secret to select from.  Must be
                          a valid secret key.
                        type: string
                      name:
                        default: ""
                        description: |-
                          Name of the referent.
                          This field is effectively required, but due to backwards compatibility is
                          allowed to be empty. Instances of this type with an empty value here are
                          almost certainly wrong.
                          More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                        type: string
                      optional:
                        description: Specify whether the Secret or its key must be
                          defined
                        type: boolean
                    required:
                    - key
                    type: object
                    x-kubernetes-map-type: atomic
                  account:
                    description: |-
                      Account is the Azure Storage Account name (alias: bucket)
                      Required for: azure
                    type: string
                  account_id:
                    description: |-
                      AccountID is the account identifier
                      Required for: r2 (Cloudflare R2)
                    type: string
                  bucket:
                    description: |-
                      Bucket is the bucket/container name
                      Required for: s3, oss, gcs, r2, spaces, b2, cos, us3, kodo, bos, minio, obs, tos, upyun
                    type: string
                  client_id:
                    description: |-
                      ClientID is the Azure Client ID (format: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx)
                      Required for: azure
                    type: string
                  client_secret:
                    description: |-
                      ClientSecret is the Azure Client Secret. Use client_secret_ref to reference a Secret instead
                      Required for: azure
                    type: string
                  client_secret_ref:
                    description: |-
                      ClientSecretRef references a Secret containing the Azure Client Secret
                      Used by: azure
                    properties:
                      key:
                        description: The key of the secret to select from.  Must be
                          a valid secret key.
                        type: string
                      name:
                        default: ""
                        description: |-
                          Name of the referent.
                          This field is effectively required, but due to backwards compatibility is
                          allowed to be empty. Instances of this type with an empty value here are
                          almost certainly wrong.
                          More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                        type: string
                      optional:
                        description: Specify whether the Secret or its key must be
                          defined
                        type: boolean
                    required:
                    - key
                    type: object
                    x-kubernetes-map-type: atomic
                  container:
                    description: |-
                      Container is the Azure container name
                      Required for: azure
                    type: string
                  credentials:
                    description: |-
                      Credentials is the JSON content of Google Cloud Application Credentials. Use credentials_ref to reference a Secret instead
                      Used by: gcs
                    type: string
                  credentials_file:
                    description: |-
                      CredentialsFile is the path to Google Cloud Application Credentials file
                      Used by: gcs
                    type: string
                  credentials_ref:
                    description: |-
                      CredentialsRef references a Secret containing the Google Cloud Application Credentials JSON
                      Used by: gcs
                    properties:
                      key:
                        description: The key of the secret to select from.  Must be
                          a valid secret key.
                        type: string
                      name:
                        default: ""
                        description: |-
                          Name of the referent.
                          This field is effectively required, but due to backwards compatibility is
                          allowed to be empty. Instances of this type with an empty value here are
                          almost certainly wrong.
                          More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                        type: string
                      optional:
                        description: Specify whether the Secret or its key must be
                          defined
                        type: boolean
                    required:
                    - key
                    type: object
                    x-kubernetes-map-type: atomic
                  endpoint:
                    description: |-
                      Endpoint is the custom endpoint URL for S3-compatible services
                      Used by: s3, oss, r2, spaces, b2, minio, and other S3-compatible services
                    type: string
                  force_path_style:
                    description: |-
                      ForcePathStyle forces path-style URLs instead of virtual-hosted-style
                      Used by: s3 and S3-compatible services
                    type: boolean
                  host:
                    description: |-
                      Host is the server hostname
                      Required for: ftp, sftp, scp
                    type: string
                  keep:
                    description: |-
                      Keep specifies how many backups to retain at this storage location
                      Used by: all storage types
                    type: integer
                  max_retries:
                    description: |-
                      MaxRetries is the maximum number of retry attempts. Default: 3
                      Used by: s3, oss, r2, spaces, b2, cos, us3, kodo, bos, minio, obs, tos, upyun
                    type: integer
                  passphrase:
                    description: |-
                      Passphrase is the password for the private key if present
                      Used by: sftp, scp
                    type: string
                  passphrase_ref:
                    description: |-
                      PassphraseRef references a Secret containing the private key passphrase
                      Used by: sftp, scp
                    properties:
                      key:
                        description: The key of the secret to select from.  Must be
                          a valid secret key.
                        type: string
                      name:
                        default: ""
                        description: |-
                          Name of the referent.
                          This field is effectively required, but due to backwards compatibility is
                          allowed to be empty. Instances of this type with an empty value here are
                          almost certainly wrong.
                          More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                        type: string
                      optional:
                        description: Specify whether the Secret or its key must be
                          defined
                        type: boolean
                    required:
                    - key
                    type: object
                    x-kubernetes-map-type: atomic
                  password:
                    description: |-
                      Password for authentication. Use password_ref to reference a Secret instead
                      Used by: ftp, sftp, scp, webdav
                    type: string
                  password_ref:
                    description: |-
                      PasswordRef references a Secret containing the password
                      Used by: ftp, sftp, scp, webdav
                    properties:
                      key:
                        description: The key of the secret to select from.  Must be
                          a valid secret key.
                        type: string
                      name:
                        default: ""
                        description: |-
                          Name of the referent.
                          This field is effectively required, but due to backwards compatibility is
                          allowed to be empty. Instances of this type with an empty value here are
                          almost certainly wrong.
                          More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                        type: string
                      optional:
                        description: Specify whether the Secret or its key must be
                          defined
                        type: boolean
                    required:
                    - key
                    type: object
                    x-kubernetes-map-type: atomic
                  path:
                    description: |-
                      Path is the remote path for saving backup files
                      Used by: all storage types except azure (uses container)
                    type: string
                  port:
                    description: |-
                      Port is the server port. Default varies by protocol (ftp: 21, sftp: 22, scp: 22)
                      Used by: ftp, sftp, scp
                    type: integer
                  private_key:
                    description: |-
                      PrivateKey is the path to SSH private key. Default: ~/.ssh/id_rsa
                      Used by: sftp, scp
                    type: string
                  private_key_ref:
                    description: |-
                      PrivateKeyRef references a Secret containing the SSH private key content
                      Used by: sftp, scp
                    properties:
                      key:
                        description: The key of the secret to select from.  Must be
                          a valid secret key.
                        type: string
                      name:
                        default: ""
                        description: |-
                          Name of the referent.
                          This field is effectively required, but due to backwards compatibility is
                          allowed to be empty. Instances of this type with an empty value here are
                          almost certainly wrong.
                          More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                        type: string
                      optional:
                        description: Specify whether the Secret or its key must be
                          defined
                        type: boolean
                    required:
                    - key
                    type: object
                    x-kubernetes-map-type: atomic
                  region:
                    description: |-
                      Region is the storage region. Default varies by provider (s3: us-east-1, oss: cn-hangzhou, spaces: nyc1, b2: us-east-001, minio: us-east-1)
                      Used by: s3, oss, spaces, b2, minio, and other S3-compatible services
                    type: string
                  root:
                    description: |-
                      Root is the WebDAV server root URL (e.g., http://localhost:8080)
                      Required for: webdav
                    type: string
                  secret_access_key:
                    description: |-
                      SecretAccessKey is the secret access key. Use secret_access_key_ref to reference a Secret instead
                      Used by: s3, oss, r2, spaces, b2, cos, us3, kodo, bos, minio, obs, tos, upyun
                    type: string
                  secret_access_key_ref:
                    description: |-
                      SecretAccessKeyRef references a Secret containing the secret access key
                      Used by: s3, oss, r2, spaces, b2, cos, us3, kodo, bos, minio, obs, tos, upyun
                    properties:
                      key:
                        description: The key of the secret to select from.  Must be
                          a valid secret key.
                        type: string
                      name:
                        default: ""
                        description: |-
                          Name of the referent.
                          This field is effectively required, but due to backwards compatibility is
                          allowed to be empty. Instances of this type with an empty value here are
                          almost certainly wrong.
                          More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                        type: string
                      optional:
                        description: Specify whether the Secret or its key must be
                          defined
                        type: boolean
                    required:
                    - key
                    type: object
                    x-kubernetes-map-type: atomic
                  storage_class:
                    description: |-
                      StorageClass is the storage class. Default varies by provider (s3: STANDARD_IA, oss: STANDARD_IA, spaces: STANDARD, b2: STANDARD)
                      Used by: s3, oss, spaces, b2
                    type: string
                  tenant_id:
                    description: |-
                      TenantID is the Azure Tenant ID (format: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx)
                      Required for: azure
                    type: string
                  timeout:
                    description: |-
                      Timeout is the upload timeout in seconds. Default: 300
                      Used by: s3, oss, ftp, sftp, scp, gcs, azure, r2, spaces, b2, cos, us3, kodo, bos, minio, obs, tos, upyun
                    type: integer
                  username:
                    description: |-
                      Username for authentication
                      Used by: ftp, sftp, scp, webdav
                    type: string
                type: object
              type:
                description: Type is the storage backend type
                enum:
                - local
                - ftp
                - sftp
                - scp
                - webdav
                - s3
                - oss
                - gcs
                - azure
                - r2
                - spaces
                - b2
                - cos
                - us3
                - kodo
                - bos
                - minio
                - obs
                - tos
                - upyun
                type: string
            required:
            - config
            - type
            type: object
          status:
            description: StorageStatus defines the observed state of Storage
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
